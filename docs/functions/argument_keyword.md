# 引数に指定できる共通キーワード

## 検索範囲指定

### 日付指定
- 指定されたキーワードを基にリストに追加
  - キーワードは複数指定可能
  - 実行時の時間を基準に算出
  - リスト内の最小値と最大値の期間を取る

|         キーワード         |                   追加される日付                   |                        備考                        |
| -------------------------- | -------------------------------------------------- | -------------------------------------------------- |
| 当日                       | 12時間前の日付                                     |                                                    |
| 今日                       | 今日の日付                                         |                                                    |
| 昨日                       | 昨日の日付                                         |                                                    |
| 今月                       | 今月月初の日付<br />今月月末の日付                 |                                                    |
| 先月                       | 先月月初の日付<br />先月月末の日付                 |                                                    |
| 先々月                     | 先々月月初の日付<br />先々月月末の日付             |                                                    |
| 今年                       | 今年の1月1日<br />今年の12月31日                   |                                                    |
| 去年<br />昨年             | 前年の1月1日<br />前年の12月31日                   |                                                    |
| 一昨年                     | 前々年の1月1日<br />前々年の12月31日               |                                                    |
| 最初                       | 記録されている最初のレコードの前日                 | 集計対象のルールバージョン識別子で異なる日付が返る |
| 最後                       | 翌日の日付                                         |                                                    |
| 全部                       | 記録されている最初のレコードの前日<br />翌日の日付 | 最初から最後まで                                   |
| YYYYMMDD                   | 指定日 （連続した数字8桁）                         | MMとDDは常に2桁                                    |
| YYYY-MM-DD<br />YYYY/MM/DD | 指定日                                             |                                                    |

### 回数指定
|                    キーワード                    |                          内容                          | 備考 |
| ------------------------------------------------ | ------------------------------------------------------ | ---- |
| 直近<ins>NNN</ins>                               | <ins>NNN</ins>回前からのゲームを集計                   | 数字 |
| 規定打数<ins>NNN</ins><br />規定数<ins>NNN</ins> | プレイ数が<ins>NNN</ins>回以下のメンバーを非表示にする | 数字 |

### コメント検索
ゲームコメントが付いているものを集計対象にする。\
指定したコメントが付いていないゲームは集計対象外となる。

|       キーワード       |                                 内容                                 |   備考   |
| ---------------------- | -------------------------------------------------------------------- | -------- |
| コメント<ins>XXX</ins> | ゲームコメントを<ins>XXX</ins>で検索する                             | 部分一致 |
| 集約<ins>NNN</ins>     | ゲームコメントの文字列を先頭から<ins>NNN</ins>文字目でグループ化する | 集約集計 |

### 集計対象ルール指定
|                 キーワード                 |                        内容                        |                 備考                 |
| ------------------------------------------ | -------------------------------------------------- | ------------------------------------ |
| 横断<br />mix<br />mixed                   | 未マッピングのルールセットも集計対象に含める       | 自動的に`規定打数0`が付与される      |
| サンマ<br />三麻<br />三人打<br />三人打ち | `mode=3`が指定されているルールセットをすべて含める | マッピングされているルールセットのみ |
| ヨンマ<br />四麻<br />四人打<br />四人打ち | `mode=4`が指定されているルールセットをすべて含める | マッピングされているルールセットのみ |

> [!NOTE]
> 参照：[keyword_mappingセクション](../config/mainconf.md#keyword_mappingセクション)、[ルールセット設定](../config/ruleset.md)

### 出力フォーマット変更
|  キーワード   |        内容        | 備考  |
| ------------- | ------------------ | ----- |
| text<br />txt | テキスト形式で表示 | UTF-8 |
| csv           | CSV形式で表示      | UTF-8 |

### その他
|            キーワード            |                 内容                 |        備考         |
| -------------------------------- | ------------------------------------ | ------------------- |
| 匿名                             | プレイヤー名を伏せる                 | `Player_XXX` に置換 |
| チーム<br />チーム成績<br />team | 個人集計からチーム集計に切り替える   |                     |
| 個人<br />個人成績               | チーム集計から個人集計に切り替える   |                     |
| ゲストあり                       | 集計結果にゲストの成績を含める       | 下記説明参照        |
| ゲストなし                       | 集計結果からゲストの成績を除外する   | 下記説明参照        |
| ゲスト無効                       | 未登録メンバーをゲストに置き換えない | 下記説明参照        |

## ゲストの成績の取り扱いに関するオプション
複数のオプションが同時に指定されている場合は出現順序で処理され、結果を上書きしていく。

### ゲストあり
- 集計結果にゲストの成績を含める
  - 2ゲスト戦の成績は除外される
    - 1ゲームにゲストが2名以上いる場合、ゲストは同名のプレイヤーとして扱われ、成績が合算されてしまう（2ゲスト戦）
    - 正しく集計できないプレイヤーがゲームに存在するため、2ゲスト戦で記録された成績は集計対象外になる（ゲーム自体を無効にする）
- `ゲスト無効` の指定は効果がなくなる
  - 未登録メンバーはゲストに置換される

### ゲストなし
- 集計結果からゲストの成績を除外する
  - ゲストプレイヤーの成績を集計対象外にする
  - 2ゲスト戦の成績が計上されるようになる（ゲスト以外のプレイヤーの成績は集計される）
- `ゲスト無効` の指定は効果がなくなる
  - 未登録メンバーはゲストに置換される

### ゲスト無効
- 未登録メンバーをゲストに置き換えず、個別のメンバーとして集計する
  - 入力された名前のメンバーとして扱う
  - 敬称は削除される
- ゲストが存在しなくなるため、2ゲスト戦が発生しない
  - すべてのゲームが集計対象になる
