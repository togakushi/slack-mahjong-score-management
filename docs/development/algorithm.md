# アルゴリズム

## 登録データ抽出アルゴリズム
1. 入力されたテキスト内の改行と空白を削除
2. 成績登録キーワードを「keyword」として、下記のパターンにマッチするかチェック
   - コメントなし
     - rf"^({keyword})([^0-9()+-]+)([0-9+-]+){{{mode}}}$"
     - rf"^([^0-9()+-]+)([0-9+-]+){{{mode}}}({keyword})$"
   - コメントあり
     - rf"^({keyword})\((.+?)\)([^0-9()+-]+)([0-9+-]+){{{mode}}}$"
     - rf"^([^0-9()+-]+)([0-9+-]+){{{mode}}}({keyword})\((.+?)\)$"
3. パターン別に出現位置情報からそれぞれ値を取り込む

## 名前表記ブレ修正アルゴリズム
1. 検索で抽出されたメッセージからキーワード「設定キーワード({keyword})」を削除
2. すべての空白と改行を削除
3. 「([^0-9+-]+)([0-9+-]+)」を4回繰り返したパターンにマッチさせ、名前と素点を分離
4. 登録メンバー名と名前を比較
5. 一致しない場合は以下の処理をおこない、登録メンバー名と比較
   1. 敬称を削除して比較（さん、くん、ちゃんなど）
   2. カタカナ部分をひらがなに置換して比較
   3. ひらがな部分をカタカナに置換して比較
6. 登録メンバー名と一致しない名前は「ゲスト」に置き換える
   - 「ゲスト」の名前は[memberセクション](../config/mainconf.md#memberセクション)の`guest_name`で指定する
